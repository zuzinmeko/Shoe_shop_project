<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:p="http://xmlns.jcp.org/jsf/passthrough"
      xmlns:h="http://java.sun.com/jsf/html"> 

<h:head>
   <link rel="icon" href="assets/images/favicon.ico"></link>
   <link 
   href="https://fonts.googleapis.com/css?family=Poppins:100,200,300,400,500,600,700,800,900&display;swap"
    rel="stylesheet">
	</link> 
	<title>Shoe Store Online Shop</title>
	
    <!-- Bootstrap core CSS -->
    <h:outputStylesheet library="css" name="bootstrap.min.css"></h:outputStylesheet>
    <h:outputStylesheet library="webjars" name="font-awesome/5.15.0/css/all.min-jsf.css"></h:outputStylesheet>
	<h:outputStylesheet library="css" name="style.css"></h:outputStylesheet>
    <h:outputStylesheet library="css" name="owl.css"></h:outputStylesheet>
    <style>
    	#bImg{
    	background-image: url(resources/assets/images/other-image-fullscren-1-1920x900.jpg);
   		 }
  		 #banner1{
   			padding: 300px 0px;
			background-image: url(resources/assets/images/slider-image-2-1920x600.jpg);
			background-size: cover;
			background-repeat: no-repeat;
			background-position: center center;
 		  }
 		  #banner2{
 		  	padding: 300px 0px;
			background-image: url(resources/assets/images/slider-image-1-1920x600.jpg);
			background-size: cover;
			background-repeat: no-repeat;
			background-position: center center;
 		  
 		  }
 		  #banner3{
 		  		padding: 300px 0px;
				background-image: url(resources/assets/images/slider-image-3-1920x600.jpg); 
				background-size: cover;
				background-repeat: no-repeat;
				background-position: center center;
 		  
 		  }
    		.animation{
			
		 	position: relative; 
			  animation: mymove 1s infinite;
			  animation-timing-function: ease-in;
    	 
	    	}
	    	@keyframes mymove 
	    	{
	  		from {left: 0px;}
	  		to {left: 30px;
	  		}
    </style>

</h:head> 
<body>

    <!-- ***** Preloader Start ***** -->
    <div id="preloader">
        <div class="jumper">
            <div></div>
            <div></div>
            <div></div>
        </div>
    </div>  
    <!-- ***** Preloader End ***** -->

    <!-- Header -->
    <header class="">
      <nav class="navbar navbar-expand-lg">
        <div class="container">
          <a class="navbar-brand" href="index.html"><h2>Online Store <em>Website</em></h2></a>
          <button class="navbar-toggler" type="button" p:data-toggle="collapse" p:data-target="#navbarResponsive" p:aria-controls="navbarResponsive" p:aria-expanded="false" p:aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>
          <div class="collapse navbar-collapse" id="navbarResponsive">
              <ul class="navbar-nav ml-auto">
                <li class="nav-item #{view.viewId eq'/customer_view.xhtml' ? 'active' : '' }">
                    <h:link outcome="/customer_view" styleClass="nav-link">
                    	Home
                    	<span class="sr-only">(current)</span>
               			</h:link>
	                 </li> 

                <li class="nav-item #{view.viewId eq'/product_view.xhtml' ? 'active' : '' }">
                <h:link outcome="/product_view" styleClass="nav-link">
                    Products
               </h:link>
                </li>
				  <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" data-toggle="dropdown" href="#" role="button" aria-haspopup="true" aria-expanded="false">More</a>
                    
                    <div class="dropdown-menu">
                    
                      <h:link outcome="/register" styleClass="dropdown-item">
                    		Register
              		 </h:link>
                      <h:link outcome="/frontend/checkout" styleClass="dropdown-item">
                    		Checkout
               			</h:link>
                       <h:link outcome="/frontend/order" styleClass="dropdown-item">
                    		Orders
               		</h:link>
                     <h:link outcome="/contact" styleClass="dropdown-item">
                   	 		About and Contact
              	 	</h:link>
              	 	<h:link onclick="$('#profile').modal('show');return false;"  styleClass="dropdown-item #{loginBean.loginUser.id !=0 ? '': 'd-none'}">
              	 		Profile : #{loginBean.loginUser.userName}<i class="fa fa-user"></i>
              	 	</h:link>
                    </div>
                </li>
			   
			    <li class="nav-item #{view.viewId eq'/cus_login.xhtml' ? 'active' : '' }">
                <h:link outcome="/cus_login" styleClass="nav-link" rendered="#{loginBean.loginUser.id==0}">
                    Login
               </h:link>
               <h:commandLink onclick="$('#logoutModal').modal('show');return false;" styleClass="nav-link text-center" rendered="#{loginBean.loginUser.id!=0}">
               			<i class="fas fa-sign-out-alt" style="font-size:24px; color:  red;"></i>
               </h:commandLink>
                </li>
                 <li class="nav-item #{view.viewId eq'/cart.xhtml' ? 'active' : '' }">
                	 <h:link outcome="/cart"  id="count" styleClass="nav-link">
                	  	<i class="fa fa-shopping-cart" style="font-size:24px; color:  red;"></i>
						<span style="color: red;">
						<h:outputText value="#{cartBean.itemCount}" id="item_count"></h:outputText>
						</span>
					 </h:link>       
			   </li>
			  </ul>
          </div>
        </div>
      </nav>
    </header>

    <!-- Page Content -->
    <!-- Banner Starts Here -->
    <div class="banner header-text">
     
    </div>
    <!-- Banner Ends Here -->
    <br /><br />
     <div class="row text-center animation ml-4 #{placeOrderBean.orders.size() == 0 ? '' :'d-none'}">
    	<div class="card col-5 shadow mb-4 mr-5 pl-3 pt-3 ml-3 center">
    		
    		<div class="card-body ml-3 mb-4 mr-5 pl-3 pt-3 text-center">
    			<br /><h5 class="mb-3 text-center"> Order is empty !</h5><br />
    			<h:link outcome="/customer_view" value="Go to Shopping"></h:link>
    		</div>
    	</div>
    </div>
	<div class="card shadow  mb-4 mr-5 pl-3 pt-3 #{placeOrderBean.orders.size() == 0 ? 'd-none' :''}">
                        <div class="card-header py-3">
                            <h6 class="m-0 font-weight-bold text-primary">Orders Page</h6>
                        </div>
                        <div class="card-body">
                           <div class="row">
                           		<div class="col-lg-12">
                           			
                           				<div class="card-body">
				                            <div class="table-responsive">
				                            <h:form>
				                                <h:dataTable binding="#{t}" var="o" value="#{placeOrderBean.orders}"  headerClass=",p-name,,,," styleClass="table table-bordered" width="100%" cellspacing="0">
				                                	<h:column>
				                                		<f:facet name="header">No</f:facet>
				                                		#{t.rowIndex+1}
				                                	</h:column>
				                                	<h:column>
				                                		<f:facet name="header">Order Id</f:facet>
				                                		<h:outputText value="CODE-#{o.id}"></h:outputText>
				                                	</h:column>
				                                	<h:column>
                                					<f:facet name="header">Order Date</f:facet>
                                					#{o.orderDate}
                                					</h:column>
                                				<h:column>
				                                		<f:facet name="header"> Status</f:facet>
				                                		#{o.status}
				                                		<h:outputText value="(#{o.receivedDate})" rendered="#{o.status== 'Received'}" />
				                                	</h:column>
                                					<h:column>
                                					<f:facet name="header">-</f:facet>
                                					<h:commandLink action="#{placeOrderBean.getOrderDetails(o.id)}" value="Details" styleClass="btn btn-primary btn-sm" onclick="$('#order-item-dialog').modal('show');">
                                					<f:ajax render="order-item"></f:ajax>
                                					</h:commandLink>
                                				</h:column>
                             			  </h:dataTable>
                             			 </h:form>
                           			 </div>
                       			 </div>
                           	
                          </div>
                         </div>
                        </div>
                    </div>
<!--  -->
  
    <footer>
      <div class="container">
        <div class="row">
          <div class="col-md-12">
            <div class="inner-content">
              <p>Copyright © 2020 Shoe Store</p>
            </div>
          </div>
        </div>
      </div>
    </footer>


    <!-- Bootstrap core JavaScript -->
    <h:outputScript library="vendor" name="jquery/jquery.min.js"></h:outputScript>
	<h:outputScript library="vendor" name="bootstrap/js/bootstrap.bundle.min.js"></h:outputScript>
     <!-- Additional Scripts -->
     <h:outputScript library="assets" name="js/custom.js"></h:outputScript>
    <h:outputScript library="assets" name="js/owl.js"></h:outputScript>
 	<!-- modal dialog -->
 	 <div class="modal fade" id="logoutModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
        aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">Ready to Leave?</h5>
                    <button class="close" type="button" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">×</span>
                    </button>
                </div>
                <div class="modal-body"><h3>Are You Sure Leave!</h3></div>
                <div class="modal-footer">
                <h:form>
	                    <button class="btn btn-secondary" type="button" data-dismiss="modal">Cancel</button>
	                  <h:commandLink action="#{loginBean.cus_logout()}" value="LogOut" styleClass="btn btn-primary ml-2"/>
	    				
	    		</h:form>
                </div>
            </div>
        </div>
    </div>
    
    <!--  -->
       <div class="modal fade" id="profile">
    	<div class="modal-dialog">
    		<div class="modal-content">
    			<div class="modal-body text-center">
    				<div class="mb-4">
    						<h:graphicImage  styleClass="rounded-circule shadow-sm" library="img" name="undraw_profile.svg" width="150" height="150" />
    					</div>
    					<hr />
    					<h4 class="text-dark mb-2">#{loginBean.loginUser.userName}</h4>
    					<p>(Role : #{loginBean.loginUser.role})</p>
    					<p>Email: #{loginBean.loginUser.loginId}</p>
    					<p>Phone : #{loginBean.loginUser.phone}</p><br />
    					<p>Address : #{loginBean.loginUser.address}</p>
    			</div>
    			<div class="modal-footer">
    			
    				
    			</div>
    		</div>
    	</div>
    </div>
        <!--  --> 
        <div class="fade modal mt-2" id="order-item-dialog">
        	<div class="modal-dialog">
        		<div class="modal-content">
        			<div class="modal-body">
        				<h6>Order Details</h6>
        				<h:dataTable binding="#{t1}" styleClass="table" id="order-item" value="#{placeOrderBean.orderDetails}" var="od">
        					<h:column>
        						<f:facet name="header">No</f:facet>
        						#{t1.rowIndex+1}
        					</h:column>
        					<h:column>
        						<f:facet name="header">Name</f:facet>
        						#{od.product.name}
        					</h:column>
        					<h:column>
        						<f:facet name="header">Price</f:facet>
        						#{od.product.price}
        					</h:column>
        					<h:column>
        						<f:facet name="header">Qty</f:facet>
        						#{od.subQty}
        					</h:column>
        					<h:column>
        						<f:facet name="header">Total Amount</f:facet>
        						#{od.subPrice()}
        					</h:column>
        				</h:dataTable>
        			</div>
        			<div class="modal-footer">
        				 <button type="button" class="btn btn-secondary" p:aria-label="Close">Close</button>
        			</div>
        		</div>
        	</div>
        </div>
  </body> 
</html>
